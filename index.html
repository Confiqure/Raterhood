<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Raterhood - Smart Neighbourhood Maps</title>
  <link rel="shortcut icon" type="image/png" href="../confiqure.github.io/img/favicon.png"/>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom fonts for this template -->
  <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>

  <!-- Plugin CSS -->
  <link href="vendor/magnific-popup/magnific-popup.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="css/creative.css" rel="stylesheet">

  <!-- Google autocomplete api -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
  <script src="js/api/homescore.js"></script>

</head>

<body id="page-top">

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
    <div class="container">
      <a class="navbar-brand js-scroll-trigger" href="#page-top">
        <img width="150" class="header-image" src="../confiqure.github.io/img/untitled.png">
      </a>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#map">Map</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#about">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#services">Services</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#portfolio">Portfolio</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#contact">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <header class="masthead text-center text-white d-flex">
    <div class="container my-auto">
      <div class="row">
        <div class="col-lg-10 mx-auto">
          <h1 class="text-uppercase">
            <strong>Raterhood is using blockchain and neural network technologies and the internet of things to disrupt hoods everywhere</strong>
          </h1>
          <hr>
        </div>
        <div class="col-lg-6 mx-auto">
          <input class="form-control" type="text" id="address"></input>
          <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=places&language=en-US&key=AIzaSyD80MTnM0OQWoOiucVSgKYZJ8NYAmgzSFo&callback=initMap" async defer></script>
        </div>
      </div>
    </div>
  </header>

  <div class="showMe" style="display:none">
    <section class="bg-darker" id="map">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto text-center">
            <!--    Code for the map -->
            <div id="map"></div>
            <script>

            var map;
            var censusMin = Number.MAX_VALUE, censusMax = -Number.MAX_VALUE;
            var infowindow;
            var homescore, crime, commute, schools, overall;

            function initMap() {
              var autocomplete = new google.maps.places.Autocomplete($("#address")[0], {});
              google.maps.event.addListener(autocomplete, 'place_changed', function() {
                var place = autocomplete.getPlace();
                getHomeScore(place.geometry.location.lat(), place.geometry.location.lng());
                console.log(place.address_components);
                $('.showMe').slideToggle('slow');
              });

              var lat = 42.3601;
              var lng = -71.0589;
              var uluru = { lat: lat, lng: lng };
              // load the map
              map = new google.maps.Map(document.getElementById('map'), {
                  center: uluru,
                  zoom: 12,
                  //styles: mapStyle
              });
              map.setOptions({ minZoom: 12, maxZoom: 15 });

              var marker = new google.maps.Marker({
                  position: uluru,
                  map: map
              });

              // set up the style rules and events for google.maps.Data
              map.data.setStyle(styleFeature);
              map.data.addListener('click', mouseInToRegion);

              // wire up the button
              var selectBox = document.getElementById('census-variable');
              google.maps.event.addDomListener(selectBox, 'change', function () {
                  clearCensusData();
                  loadCensusData(selectBox.options[selectBox.selectedIndex].value);
              });

              // state polygons only need to be loaded once, do them now
              loadMapShapes();
            }

            /** Loads the state boundary polygons from a GeoJSON source. */
            function loadMapShapes() {
                // load US state outline polygons from a GeoJson file
                map.data.loadGeoJson('../confiqure.github.io/geojson/masszips.geojson', { idPropertyName: "NEIGHBOURHOOD" });

                // wait for the request to complete by listening for the first feature to be
                // added
                google.maps.event.addListenerOnce(map.data, 'addfeature', function () {
                    google.maps.event.trigger(document.getElementById('census-variable'),
                        'change');
                });
            }

            //bigScoreFunction
            function setScores(zips){
              var scoreMap = new Map();
              for( var i = 0; i < zips.length; i++ ){
                var homeScore = getHomeScore(zips[i]);
                //var crimeScore = getHomeScore(zips[i]);
                //var commuteScore = getCommuteScore(zips[i]);
                var bigScore = computeBigScore(homeScore);
                scoreMap.set(zips[i], bigScore);
              }
            }

            //computeBigScore
            function computeBigScore(homeScore){
              return homeScore;
            }

            //function to return a latlong pair from a zipcode
            function getLatLongFromZip(zipcode){
              var request = new XMLHttpRequest();
              var requestURL = "http://maps.googleapis.com/maps/api/geocode/json?address=" + zipcode;
              var latLong = [];
              request.open("GET", requestURL);
              request.onload = function(){
                var responseJSON = JSON.parse(request.responseText);
                latLong.push(['results'][0]['geometry']['location']['lat']);
                latLong.push(['results'][0]['geometry']['location']['lng']);
                return latLong;
              };
            }

            /**
             * Loads the census data from a simulated API call to the US Census API.
             *
             * @param {string} variable
             */
            function loadCensusData(variable) {
                // load the requested variable from the census API (using local copies)
                var xhr = new XMLHttpRequest();
                xhr.open('GET', variable + '.json');
                xhr.onload = function () {
                    var censusData = JSON.parse(xhr.responseText);
                    censusData.shift(); // the first row contains column names
                    censusData.forEach(function (row) {
                        var censusVariable = parseFloat(row[0]);
                        var stateId = row[1];

                        // keep track of min and max values
                        if (censusVariable < censusMin) {
                            censusMin = censusVariable;
                        }
                        if (censusVariable > censusMax) {
                            censusMax = censusVariable;
                        }

                        // update the existing row with the new data
                        map.data
                            .getFeatureById(stateId)
                            .setProperty('census_variable', censusVariable);
                    });

                    // update and display the legend
                    document.getElementById('census-min').textContent =
                        censusMin.toLocaleString();
                    document.getElementById('census-max').textContent =
                        censusMax.toLocaleString();
                };
                xhr.send();
            }

            /** Removes census data from each shape on the map and resets the UI. */
            function clearCensusData() {
                censusMin = Number.MAX_VALUE;
                censusMax = -Number.MAX_VALUE;
                map.data.forEach(function (row) {
                    row.setProperty('census_variable', undefined);
                });
                //document.getElementById('data-box').style.display = 'none';
                document.getElementById('data-caret').style.display = 'none';
            }

            /**
             * Applies a gradient style based on the 'census_variable' column.
             * This is the callback passed to data.setStyle() and is called for each row in
             * the data set.  Check out the docs for Data.StylingFunction.
             *
             * @param {google.maps.Data.Feature} feature
             */
            function styleFeature(feature) {
                var low = [5, 69, 54];  // color of smallest datum
                var high = [151, 83, 34];   // color of largest datum

                // delta represents where the value sits between the min and max
                var delta = (feature.getProperty('census_variable') - censusMin) /
                    (censusMax - censusMin);

                var color = [];
                for (var i = 0; i < 3; i++) {
                    // calculate an integer color based on the delta
                    color[i] = (high[i] - low[i]) * delta + low[i];
                }

                // determine whether to show this shape or not
                var showRow = true;
                if (feature.getProperty('census_variable') == null ||
                    isNaN(feature.getProperty('census_variable'))) {
                    color[0] = 255;
                    color[1] = 255;
                    color[2] = 255;
        //            showRow = false;
                }

                var outlineWeight = 0.5, zIndex = 1;
                if (feature.getProperty('state') === 'hover') {
                    outlineWeight = zIndex = 2;
                }

                return {
                    strokeWeight: outlineWeight,
                    strokeColor: '#000000',
                    zIndex: zIndex,
                    fillColor: 'hsl(' + color[0] + ',' + color[1] + '%,' + color[2] + '%)',
                    fillOpacity: 0.5,
                    visible: showRow
                };
            }

            /**
             * Responds to the mouse-in event on a map shape (state).
             *
             * @param {?google.maps.MouseEvent} e
             */
            function mouseInToRegion(e) {
                try {
                    //$(".gm-style-iw").parentElement.remove();
                    infowindow.close();
                }
                catch (err) {}

                var percent = (e.feature.getProperty('census_variable') - censusMin) /
                    (censusMax - censusMin) * 100;

                var content = "<b>" + e.feature.getProperty('NAME') + "</b><br/>Homescore: " +
                    e.feature.getProperty('census_variable').toLocaleString() + "<br/>Crime: " +
                    "<br/>Commute:" + "<br/>School:" + "<br/><b>Overall:</b>";

                infowindow = new google.maps.InfoWindow({
                    content: content,
                    position: e.latLng
                });
                infowindow.open(map);

                // update the label
                //document.getElementById('data-label').textContent =
                  //  e.feature.getProperty('NAME');
                //document.getElementById('data-value').textContent =
                  //  e.feature.getProperty('census_variable').toLocaleString();
                //document.getElementById('data-box').style.display = 'block';
                //document.getElementById('data-caret').style.display = 'block';
                //document.getElementById('data-caret').style.paddingLeft = percent + '%';
            }
            /** Computes the overall metric score.
             *
             * @param hs
             * @param cr
             * @param cm
             * @param sc
             */
            function computeOverall(hs, cr, cm, sc) {
                return (hs * .35) + (cr * .25) + (cm * .25) + (sc * .15);
            }
            </script>
          </div>
        </div>
      </div>
    </section>
  </div>

  <section class="bg-primary" id="about">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto text-center">
          <h2 class="section-heading text-white">We've got what you need!</h2>
          <hr class="light my-4">
          <p class="text-faded mb-4">Start Bootstrap has everything you need to get your new website up and running in no time! All of the templates and themes on Start Bootstrap are open source, free to download, and easy to use. No strings attached!</p>
          <a class="btn btn-light btn-xl js-scroll-trigger" href="#services">Get Started!</a>
        </div>
      </div>
    </div>
  </section>

  <section id="services">
    <div class="container">
      <div class="row">
        <div class="col-lg-12 text-center">
          <h2 class="section-heading">At Your Service</h2>
          <hr class="my-4">
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-lg-3 col-md-6 text-center">
          <div class="service-box mt-5 mx-auto">
            <i class="fa fa-4x fa-diamond text-primary mb-3 sr-icons"></i>
            <h3 class="mb-3">Sturdy Templates</h3>
            <p class="text-muted mb-0">Our templates are updated regularly so they don't break.</p>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 text-center">
          <div class="service-box mt-5 mx-auto">
            <i class="fa fa-4x fa-paper-plane text-primary mb-3 sr-icons"></i>
            <h3 class="mb-3">Ready to Ship</h3>
            <p class="text-muted mb-0">You can use this theme as is, or you can make changes!</p>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 text-center">
          <div class="service-box mt-5 mx-auto">
            <i class="fa fa-4x fa-newspaper-o text-primary mb-3 sr-icons"></i>
            <h3 class="mb-3">Up to Date</h3>
            <p class="text-muted mb-0">We update dependencies to keep things fresh.</p>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 text-center">
          <div class="service-box mt-5 mx-auto">
            <i class="fa fa-4x fa-heart text-primary mb-3 sr-icons"></i>
            <h3 class="mb-3">Made with Love</h3>
            <p class="text-muted mb-0">You have to make your websites with love these days!</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="bg-dark text-white">
    <div class="container text-center">
      <h2 class="mb-4">Free Download at Start Bootstrap!</h2>
      <a class="btn btn-light btn-xl sr-button" href="http://startbootstrap.com/template-overviews/creative/">Download Now!</a>
    </div>
  </section>

  <section id="contact">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto text-center">
          <h2 class="section-heading">Let's Get In Touch!</h2>
          <hr class="my-4">
          <p class="mb-5">Ready to start your next project with us? That's great! Give us a call or send us an email and we will get back to you as soon as possible!</p>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-4 ml-auto text-center">
          <i class="fa fa-phone fa-3x mb-3 sr-contact"></i>
          <p>123-456-6789</p>
        </div>
        <div class="col-lg-4 mr-auto text-center">
          <i class="fa fa-envelope-o fa-3x mb-3 sr-contact"></i>
          <p>
            <a href="mailto:your-email@your-domain.com">feedback@startbootstrap.com</a>
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
  <script src="vendor/scrollreveal/scrollreveal.min.js"></script>
  <script src="vendor/magnific-popup/jquery.magnific-popup.min.js"></script>

  <!-- Custom scripts for this template -->
  <script src="js/creative.min.js"></script>

</body>

</html>
