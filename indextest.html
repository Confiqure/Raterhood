<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Raterhood - Smart Neighbourhood Maps</title>
    <link rel="shortcut icon" type="image/png" href="../confiqure.github.io/img/favicon.png"/>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>

    <!-- Plugin CSS -->
    <link href="vendor/magnific-popup/magnific-popup.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/creative.css" rel="stylesheet">

    <!-- Google autocomplete api -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script src="js/api/homescore.js"></script>

  </head>

  <body id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">
          <img width="150" class="header-image" src="../confiqure.github.io/img/untitled.png">
        </a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#map">Map</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#about">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#services">Services</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#contact">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <header class="masthead text-center text-white d-flex">
      <div class="container my-auto">
        <div class="row">
          <div class="col-lg-10 mx-auto">
            <h1 class="text-uppercase">
              <strong>Raterhood is using blockchain and neural network technologies and the internet of things to disrupt hoods everywhere</strong>
            </h1>
            <hr>
          </div>
          <div class="col-lg-6 mx-auto">
            <input class="form-control" type="text" id="address"></input>
            <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=places&language=en-US&key=AIzaSyD80MTnM0OQWoOiucVSgKYZJ8NYAmgzSFo&callback=initMap" async defer></script>
          </div>
        </div>
      </div>
    </header>

    <div class="showMe" style="display:none">
      <section class="bg-darker" id="map">
        <div class="container">
          <div class="row">
            <div class="col-lg-8 mx-auto text-center">
              <!--    Code for the map -->
              <div id="map"></div>
              <script>
                  var map;
                  var infowindow;
                var zipsMap = new Map();
                zipsMap.set("01001", 50);
                zipsMap.set("02110", 25);
                zipsMap.set("02114", 50);
                zipsMap.set("02111", 75);
                zipsMap.set("02108", 100);
                var uluru = { lat: 43.1389, lng: -70.937 };
                var marker;
                  function initMap() {
                      var autocomplete = new google.maps.places.Autocomplete($("#address")[0], {});
                      google.maps.event.addListener(autocomplete, 'place_changed', function() {
                          var place = autocomplete.getPlace();
                          localStorage.setItem("boobs", "I love boobs");
                          getHomeScore(place.geometry.location.lat(), place.geometry.location.lng());
                          console.log(place.address_components);
                          //zipsMap = getScoreMap();
                          $('.showMe').slideToggle('slow');
                          google.maps.event.trigger(map,'resize');
                          map.setCenter({lat: place.geometry.location.lat(), lng: place.geometry.location.lng()});
                          marker.setPosition({lat: place.geometry.location.lat(), lng: place.geometry.location.lng()});
                          map.setZoom(12);
                          $('html, body').animate({
                              scrollTop: $(".showMe").offset().top - 50;
                          }, 2000);
                      });

                      map = new google.maps.Map(document.getElementById('map'), {
                          zoom: 12,
                          center: uluru
                      });
                      marker = new google.maps.Marker({
                          position: uluru,
                          map: map
                      });
                      map.data.setStyle(styleFeature);
                      map.data.addListener('click', mouseInToRegion);
                      loadMapShapes();
                  }

                  function loadMapShapes() {
                      console.log("loading map shapes v24");
                      // load US state outline polygons from a GeoJson file
                      map.data.loadGeoJson('../confiqure.github.io/geojson/masszips.geojson', { idPropertyName: "NEIGHBOURHOOD" });

                      // wait for the request to complete by listening for the first feature to be
                      // added
                      google.maps.event.addListenerOnce(map.data, 'addfeature', function () {
                          google.maps.event.trigger(document.getElementById('census-variable'),
                              'change');
                      });
                  }

                  function getColor(value){
                      var score = value / 100;
                      var hue=((score)*120).toString(10);
                      return ["hsl(",hue,",100%,50%)"].join("");
                  }

                  function styleFeature(feature) {
                      if(zipsMap.get(feature.getProperty("POSTCODE")) != undefined){
                        console.log("HELLO");
                        var color = getColor(zipsMap.get(feature.getProperty("POSTCODE")));
                        return {
                            strokeWeight: 0.5,
                            strokeColor: '#000000',
                            zIndex: 1,
                            fillColor: color,
                            fillOpacity: 0.5,
                            visible: true
                        };
                      }
                      return {
                          strokeWeight: 0.5,
                          strokeColor: '#000000',
                          zIndex: 1,
                          fillColor: '#fff',
                          fillOpacity: 0.5,
                          visible: true
                      };
                  }

                  /**
                   * Responds to the mouse-in event on a map shape (state).
                   *
                   * @param {?google.maps.MouseEvent} e
                   */
                  function mouseInToRegion(e) {
                      try {
                          //$(".gm-style-iw").parentElement.remove();
                          infowindow.close();
                      }
                      catch (err) { }


                      var content = "<b>" + e.feature.getProperty('PC_NAME') + "</b><br/>Homescore: " +
                          "<br/>Crime: " +
                          "<br/>Commute:" +
                          "<br/>School:" +
                          "<br/><b>Overall:</b>";

                      infowindow = new google.maps.InfoWindow({
                          content: content,
                          position: e.latLng
                      });
                      infowindow.open(map);

                  }

                  window.onload = function() {
                    if(localStorage.getItem("boobs") !== null){
                        document.getElementById("address").value = localStorage.getItem("boobs");
                    }
                  }

              </script>
            </div>
          </div>
        </div>
      </section>
    </div>

      <section class="bg-primary" id="about">
          <div class="container">
              <div class="row">
                  <div class="col-lg-8 mx-auto text-center">
                      <h2 class="section-heading text-white">About the Project!</h2>
                      <hr class="light my-4">
                      <p class="text-faded mb-4">Raterhood calculates and displays ratings of neighbourhoods close to your work. Raterhood is great for soon-to-be home buyers, or even people that are just looking for a change of scenery.</p>
                  </div>
              </div>
          </div>
      </section>

      <section id="services">
          <div class="container">
              <div class="row">
                  <div class="col-lg-12 text-center">
                      <h2 class="section-heading">How We Calculate Neighbourhood Scores</h2>
                      <hr class="my-4">
                  </div>
              </div>
          </div>
          <div class="container">
              <div class="row">
                  <div class="col-lg-3 col-md-6 text-center">
                      <div class="service-box mt-5 mx-auto">
                          <i class="fa fa-4x fa-home text-primary mb-3 sr-icons"></i>
                          <h3 class="mb-3">Homescore</h3>
                          <p class="text-muted mb-0">Liberty Mutual's homescore calculates the safetly and quietness of your neighbourhood.</p>
                      </div>
                  </div>
                  <div class="col-lg-3 col-md-6 text-center">
                      <div class="service-box mt-5 mx-auto">
                          <i class="fa fa-4x fa-shield text-primary mb-3 sr-icons"></i>
                          <h3 class="mb-3">Crime</h3>
                          <p class="text-muted mb-0">We analyze crime trends in your area!</p>
                      </div>
                  </div>
                  <div class="col-lg-3 col-md-6 text-center">
                      <div class="service-box mt-5 mx-auto">
                          <i class="fa fa-4x fa-car text-primary mb-3 sr-icons"></i>
                          <h3 class="mb-3">Commute</h3>
                          <p class="text-muted mb-0">We take into account your daily commute.</p>
                      </div>
                  </div>
                  <div class="col-lg-3 col-md-6 text-center">
                      <div class="service-box mt-5 mx-auto">
                          <i class="fa fa-4x fa-mortar-board text-primary mb-3 sr-icons"></i>
                          <h3 class="mb-3">Schools</h3>
                          <p class="text-muted mb-0">A good education can go a long way!</p>
                      </div>
                  </div>
              </div>
          </div>
      </section>
      <section id="contact">
          <div class="container">
              <div class="row">
                  <div class="col-lg-8 mx-auto text-center">
                      <h2 class="section-heading">Let's Get In Touch!</h2>
                      <hr class="my-4">
                      <p class="mb-5">This project was created by four undergraduates at the University of New Hampshire at the Liberty Mutual Hackathon.</p>
                  </div>
              </div>
              <div class="row">
                  <div class="col-lg-3 mr-auto text-center">
                      <i class="fa fa-envelope-o fa-3x mb-3 sr-contact"></i>
                      <p>
                          <a href="mailto:fam1001@wildcats.unh.edu">Francesco Mikulus-Borsoi</a>
                      </p>
                  </div>
                  <div class="col-lg-3 mr-auto text-center">
                      <i class="fa fa-envelope-o fa-3x mb-3 sr-contact"></i>
                      <p>
                          <a href="mailto:colinrsmall@yahoo.com">Colin Small</a>
                      </p>
                  </div>
                  <div class="col-lg-3 mr-auto text-center">
                      <i class="fa fa-envelope-o fa-3x mb-3 sr-contact"></i>
                      <p>
                          <a href="mailto:jmv1012@wildcats.unh.edu">Jason Vettese</a>
                      </p>
                  </div>
                  <div class="col-lg-3 m4-auto text-center">
                      <i class="fa fa-envelope-o fa-3x mb-3 sr-contact"></i>
                      <p>
                          <a href="mailto:dwheelerw@gmail.com">Dylan Wheeler</a>
                      </p>
                  </div>
              </div>
          </div>
      </section>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
    <script src="vendor/scrollreveal/scrollreveal.min.js"></script>
    <script src="vendor/magnific-popup/jquery.magnific-popup.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/creative.min.js"></script>

  </body>

</html>
